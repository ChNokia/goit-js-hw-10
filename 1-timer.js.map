{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["'use strict'\n\nimport flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst MS_IN_SEC = 1000;\n\nconst startBtn = document.querySelector(\".start-btn\");\nconst inputDate = document.querySelector('input[type=\"text\"]');\nconst dataDays = document.querySelector('.value[data-days]');\nconst dataHours = document.querySelector('.value[data-hours]');\nconst dataMinutes = document.querySelector('.value[data-minutes]');\nconst dataseconds = document.querySelector('.value[data-seconds]');\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n      handleCloseCalendar(selectedDates[0]);\n  },\n};\niziToast.settings({\n    backgroundColor: 'red',\n    position: 'topRight',\n    timeout: 0,\n    rtl: true,\n    messageColor: 'white',\n    displayMode: 1,\n    message: 'Please choose a date in the future'\n});\n       \nconst fp = flatpickr(inputDate, options);\nlet currentDate = Date.now();\nlet userSelectedDate = fp.now.getTime();\nlet intervalId;\n\nstartBtn.addEventListener(\"click\", handleStartBtnClick);\n\nfunction handleCloseCalendar(selectedDates) {\n    currentDate = Date.now();\n    userSelectedDate = selectedDates.getTime() - currentDate;\n    setStartBtnDisabled(userSelectedDate <= 0);\n\n    if (startBtn.disabled) {\n       iziToast.show();\n    } else {\n        iziToast.destroy();\n    }\n}\n\nfunction handleStartBtnClick() {\n    setStartBtnDisabled(true);\n    inputDate.disabled = true;\n\n    updateDate(convertMs(userSelectedDate));\n    intervalId = setInterval(updateTimer, MS_IN_SEC);\n}\n\nfunction setStartBtnDisabled(value) {\n    startBtn.disabled = value;\n}\n\nfunction updateTimer() {\n    userSelectedDate -= MS_IN_SEC;\n    updateDate(convertMs(userSelectedDate));\n\n    if (userSelectedDate < MS_IN_SEC) {\n        inputDate.disabled = false;\n        currentDate = Date.now();\n        clearInterval(intervalId);\n    }\n}\n\nfunction updateDate({ days, hours, minutes, seconds }) {\n    dataDays.innerHTML = addLeadingZero(days);\n    dataHours.innerHTML = addLeadingZero(hours);\n    dataMinutes.innerHTML = addLeadingZero(minutes);\n    dataseconds.innerHTML = addLeadingZero(seconds);\n}\n\nfunction addLeadingZero(value) {\n    return String(value).padStart(2, '0');\n}\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n"],"names":["MS_IN_SEC","startBtn","inputDate","dataDays","dataHours","dataMinutes","dataseconds","options","selectedDates","handleCloseCalendar","iziToast","fp","flatpickr","currentDate","userSelectedDate","intervalId","handleStartBtnClick","setStartBtnDisabled","updateDate","convertMs","updateTimer","value","days","hours","minutes","seconds","addLeadingZero","ms"],"mappings":"+IAOA,MAAMA,EAAY,IAEZC,EAAW,SAAS,cAAc,YAAY,EAC9CC,EAAY,SAAS,cAAc,oBAAoB,EACvDC,EAAW,SAAS,cAAc,mBAAmB,EACrDC,EAAY,SAAS,cAAc,oBAAoB,EACvDC,EAAc,SAAS,cAAc,sBAAsB,EAC3DC,EAAc,SAAS,cAAc,sBAAsB,EAE3DC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACnBC,EAAoBD,EAAc,CAAC,CAAC,CACvC,CACH,EACAE,EAAS,SAAS,CACd,gBAAiB,MACjB,SAAU,WACV,QAAS,EACT,IAAK,GACL,aAAc,QACd,YAAa,EACb,QAAS,oCACb,CAAC,EAED,MAAMC,EAAKC,EAAUV,EAAWK,CAAO,EACvC,IAAIM,EAAc,KAAK,MACnBC,EAAmBH,EAAG,IAAI,UAC1BI,EAEJd,EAAS,iBAAiB,QAASe,CAAmB,EAEtD,SAASP,EAAoBD,EAAe,CACxCK,EAAc,KAAK,MACnBC,EAAmBN,EAAc,QAAS,EAAGK,EAC7CI,EAAoBH,GAAoB,CAAC,EAErCb,EAAS,SACVS,EAAS,KAAI,EAEZA,EAAS,QAAO,CAExB,CAEA,SAASM,GAAsB,CAC3BC,EAAoB,EAAI,EACxBf,EAAU,SAAW,GAErBgB,EAAWC,EAAUL,CAAgB,CAAC,EACtCC,EAAa,YAAYK,EAAapB,CAAS,CACnD,CAEA,SAASiB,EAAoBI,EAAO,CAChCpB,EAAS,SAAWoB,CACxB,CAEA,SAASD,GAAc,CACnBN,GAAoBd,EACpBkB,EAAWC,EAAUL,CAAgB,CAAC,EAElCA,EAAmBd,IACnBE,EAAU,SAAW,GACrBW,EAAc,KAAK,MACnB,cAAcE,CAAU,EAEhC,CAEA,SAASG,EAAW,CAAE,KAAAI,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CACnDtB,EAAS,UAAYuB,EAAeJ,CAAI,EACxClB,EAAU,UAAYsB,EAAeH,CAAK,EAC1ClB,EAAY,UAAYqB,EAAeF,CAAO,EAC9ClB,EAAY,UAAYoB,EAAeD,CAAO,CAClD,CAEA,SAASC,EAAeL,EAAO,CAC3B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACxC,CAEA,SAASF,EAAUQ,EAAI,CAQrB,MAAML,EAAO,KAAK,MAAMK,EAAK,KAAG,EAE1BJ,EAAQ,KAAK,MAAOI,EAAK,MAAO,IAAI,EAEpCH,EAAU,KAAK,MAAQG,EAAK,MAAO,KAAQ,GAAM,EAEjDF,EAAU,KAAK,MAASE,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAL,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC"}